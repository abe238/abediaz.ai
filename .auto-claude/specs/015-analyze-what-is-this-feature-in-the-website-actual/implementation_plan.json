{
  "feature": "Replace Fake Newsletter Widget with Substack Integration",
  "workflow_type": "simple",
  "workflow_rationale": "Single-file modification with straightforward implementation. No multi-service coordination or complex dependencies. Simple removal of fake code and replacement with iframe embed.",
  "phases": [
    {
      "id": "phase-1-implementation",
      "name": "Newsletter Widget Replacement",
      "type": "implementation",
      "description": "Replace fake newsletter widget with working Substack iframe embed",
      "depends_on": [],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-1-1",
          "description": "Remove fake newsletter widget HTML, JavaScript, and CSS",
          "service": "static-website",
          "files_to_modify": [
            "index.html"
          ],
          "files_to_create": [],
          "patterns_from": [
            "index.html:693-701 (Follow widget pattern)"
          ],
          "changes": [
            "Remove email form HTML (lines 674-691)",
            "Remove JavaScript event listener for email-form (lines 747-754)",
            "Remove CSS for .email-form class (lines 317-343)",
            "Remove .subscriber-count styling if present"
          ],
          "verification": {
            "type": "command",
            "commands": [
              "grep -n 'email-form' index.html || echo 'PASS: email-form removed'",
              "grep -n '1,234 subscribers' index.html || echo 'PASS: fake subscriber count removed'"
            ],
            "expected": "Both greps should return no results (PASS messages)"
          },
          "status": "completed",
          "notes": "Successfully removed all fake newsletter widget code including:\n- Email form HTML widget with subscriber count display (lines 674-691)\n- .email-form CSS styling (lines 317-343)\n- .subscriber-count CSS styling\n- JavaScript email submission event listener (lines 747-754)\n\nAll verification checks pass:\n\u2713 No 'email-form' references remain\n\u2713 No '1,234 subscribers' text remains\n\u2713 No 'subscriber-count' CSS references remain\n\nChanges committed to git with descriptive message.\"",
          "updated_at": "2026-01-01T11:49:28.979099+00:00"
        },
        {
          "id": "subtask-1-2",
          "description": "Add Substack iframe embed with responsive styling",
          "service": "static-website",
          "files_to_modify": [
            "index.html"
          ],
          "files_to_create": [],
          "patterns_from": [
            "index.html:298-316 (widget structure)",
            "index.html:26-89 (CSS variables)"
          ],
          "changes": [
            "Add Substack iframe within .widget container",
            "Maintain .widget-title 'Get Updates' heading",
            "Add title='Newsletter Subscription' attribute for accessibility",
            "Add responsive CSS: max-width: 100%; height: auto;",
            "Ensure iframe styling uses existing design system variables"
          ],
          "verification": {
            "type": "manual",
            "instructions": [
              "Start local server: python3 -m http.server 8000",
              "Open http://localhost:8000 in browser",
              "Verify Substack iframe loads without errors",
              "Check browser console for no JavaScript errors",
              "Verify 'Get Updates' widget title is present",
              "Test responsive design at 360px, 480px, 768px, 1024px widths"
            ],
            "acceptance_criteria": [
              "Iframe loads successfully (no 404 or CORS errors)",
              "Widget maintains visual consistency with other sidebar widgets",
              "No horizontal scrolling on mobile (360px viewport)",
              "Iframe is functional (can enter email and subscribe)"
            ]
          },
          "status": "pending"
        },
        {
          "id": "subtask-1-3",
          "description": "Final verification and cleanup",
          "service": "static-website",
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "changes": [
            "Verify all fake widget code is removed",
            "Verify Substack iframe is properly integrated",
            "Test across multiple browsers (Chrome, Firefox, Safari)",
            "Verify existing functionality (social links, like button) still works"
          ],
          "verification": {
            "type": "e2e",
            "steps": [
              "Open http://localhost:8000 in desktop viewport",
              "Scroll to sidebar and locate 'Get Updates' widget",
              "Verify Substack iframe is visible and loads correctly",
              "Enter test email in Substack form",
              "Verify subscription flow works (redirects to Substack confirmation)",
              "Resize to mobile viewport (360px)",
              "Verify iframe fits within viewport with no overflow",
              "Verify all social links in 'Follow' widget still work",
              "Check browser console for no errors"
            ],
            "expected_outcomes": [
              "Substack iframe loads and is fully functional",
              "Responsive design works across all breakpoints",
              "No JavaScript console errors",
              "No regression in existing functionality"
            ]
          },
          "status": "pending"
        }
      ]
    }
  ],
  "summary": {
    "total_phases": 1,
    "total_subtasks": 3,
    "services_involved": [
      "static-website"
    ],
    "estimated_complexity": "low",
    "estimated_time": "30-60 minutes",
    "parallelism": {
      "max_parallel_phases": 1,
      "parallel_groups": [],
      "recommended_workers": 1,
      "speedup_estimate": "Sequential execution only (single service, dependent changes)"
    },
    "startup_command": "source auto-claude/.venv/bin/activate && python auto-claude/run.py --spec 015 --parallel 1"
  },
  "verification_strategy": {
    "risk_level": "low",
    "skip_validation": false,
    "test_creation_phase": "none",
    "test_types_required": [],
    "security_scanning_required": false,
    "staging_deployment_required": false,
    "acceptance_criteria": [
      "Fake email form and JavaScript handler completely removed",
      "Substack iframe loads and functions correctly",
      "Responsive design maintained across all breakpoints (360px, 480px, 768px, 1024px)",
      "No console errors when loading the page",
      "Existing functionality (social links, like button) remains intact",
      "Visual consistency maintained with other sidebar widgets"
    ],
    "verification_steps": [
      {
        "name": "Code Cleanup Verification",
        "command": "grep -n 'email-form\\|1,234 subscribers' index.html",
        "expected_outcome": "No results found (both removed)",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "Substack Integration Verification",
        "command": "grep -n 'abediaz.substack.com/embed' index.html",
        "expected_outcome": "One result found in widget section",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "Browser Functional Test",
        "command": "manual",
        "expected_outcome": "Iframe loads, subscription form works, responsive on mobile",
        "type": "manual",
        "required": true,
        "blocking": true
      }
    ],
    "reasoning": "Low-risk static HTML change. No unit tests needed for static site. Manual browser verification sufficient to confirm iframe integration and responsive design."
  },
  "qa_acceptance": {
    "unit_tests": {
      "required": false,
      "commands": [],
      "minimum_coverage": null,
      "reasoning": "No unit tests for static HTML site"
    },
    "integration_tests": {
      "required": false,
      "commands": [],
      "services_to_test": [],
      "reasoning": "Third-party iframe integration; no backend to test"
    },
    "e2e_tests": {
      "required": false,
      "commands": [],
      "flows": [],
      "reasoning": "Manual browser verification is sufficient for this simple change"
    },
    "browser_verification": {
      "required": true,
      "pages": [
        {
          "url": "http://localhost:8000/",
          "checks": [
            "Substack iframe renders in sidebar",
            "No console errors",
            "Widget title 'Get Updates' is visible",
            "No fake email form or subscriber count visible",
            "Iframe is functional (can enter email)",
            "Responsive at 360px (no horizontal scroll)",
            "Responsive at 768px (proper sizing)",
            "Responsive at 1024px+ (desktop layout)"
          ]
        }
      ]
    },
    "manual_verification": {
      "required": true,
      "checklist": [
        {
          "check": "Removed old form",
          "command": "grep -n 'email-form' index.html",
          "expected": "No results"
        },
        {
          "check": "Removed fake subscriber count",
          "command": "grep -n '1,234 subscribers' index.html",
          "expected": "No results"
        },
        {
          "check": "Removed JavaScript handler",
          "command": "grep -n 'email-form.*addEventListener' index.html",
          "expected": "No results"
        },
        {
          "check": "Added Substack iframe",
          "command": "grep -n 'abediaz.substack.com/embed' index.html",
          "expected": "One result in widget section"
        },
        {
          "check": "Iframe has accessibility title",
          "command": "grep -n 'title=.*Newsletter' index.html",
          "expected": "Title attribute exists on iframe"
        }
      ]
    },
    "console_verification": {
      "required": true,
      "checks": [
        {
          "check": "No JavaScript errors",
          "action": "Open DevTools Console at http://localhost:8000",
          "expected": "No errors related to email-form or missing elements"
        },
        {
          "check": "No 404 errors",
          "action": "Check Network tab in DevTools",
          "expected": "Substack iframe loads successfully (200 OK)"
        },
        {
          "check": "No console.log spam",
          "action": "Submit test in Substack form",
          "expected": "Old 'Subscribed with email:' log should not appear"
        }
      ]
    }
  },
  "qa_signoff": null,
  "last_updated": "2026-01-01T11:49:28.979126+00:00"
}